<html>
  <head>
    <title></title>
    <meta content="">
    <style></style>
  </head>
  <body>
    <form>
      Select a file for the canvas font: <input type="file" name="myFile" id="imagen"><br><br>
      <input type="text" id = "height" value = "800">
      <input type="text" id = "width" value = "600">
      <input type="button" id = "submit" value="Doble click para pintar">
    </form>
    <canvas id = 'canvas'></canvas>

  <!-- <script src="js/mapa_dinamico.js"></script> -->
  <script>
    function $(id){
      return document.getElementById(id);
    }
  (function() {
    'use strict';

    var button = $("submit");
    var canvas = $('canvas'), ctx = null;
    var lastPress = null;
    var mousex = 0, mousey = 0;
    var scaleX = null;
    var scaleY = null;
    var ctx = canvas.getContext('2d');
    var rect = canvas.getBoundingClientRect();
    var img_canvas = new Image();

    button.addEventListener('click', function (){

      var img = $("imagen");
      var img_new = img.value.replace("C:\\fakepath\\", "");
      var size = {
        width: $('width').value,
        height: $('height').value
      }
      scaleX = canvas.width / rect.width;
      scaleY = canvas.height / rect.height;
      img_canvas.src= "img_maps/"+img_new;

      window.setTimeout(paint(img_canvas), 25);

    });

    function paint(img_canvas){
      ctx.drawImage(img_canvas, 0, 0, canvas.width-5, canvas.height-5);
    }

    window.addEventListener("resize", function(){
        rect = canvas.getBoundingClientRect();
        scaleX = canvas.width / rect.width;
        scaleY = canvas.height / rect.height;
    }, false);

  })();
  </script>
  </body>
</html>